{\rtf1\ansi\ansicpg1252\cocoartf2513
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww28600\viewh18000\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f0\fs36 \cf0 \ul \ulc0 CAC (Common access card)\
\ulnone CAC is used in the high secured environment. OCSP and CRL are the two important things that we must verify when we configure CAC. These are the two ways to check the certification revocation during the Client authentication.\
\
OCSP: Online Certificate Status Protocol is an internet protocol used for obtaining revocation status of an x.509 digital certificate as good, revoked or unknown. It is a recommended method for cert revocation in client authentication. It is the server running which checks the certificate and the responder gives the status of the cert as 0 (valid) and 1 (invalid cert).\
CRL: is a Certificate Revocation List containing cert details such as valid or invalid. \ul \
\
Steps to configure CAC:\
\ulnone 1. Goto the mul client authentication client portal.\
2. Login as admin.\
3. Goto -> settings -> Authentication.\
4. Here there are AD created, the certification of the users are present in AD.\
5. Here goto the client tab. Here enable configure client chain cert and choose the client chain cert (dod_jitc_root_ca-3) and upload it.\
Enables the client to provide client chain cert for authentication. If cert is not present authentication will not be done using credentials username and password.\
6. Verify the authn config status using ncli: ncli authconfig get-client-authentication-config\
7. Again login into the PRISM and goto client tab and enable configure service account (for swipe access authentication instead of 2 step token authentication.) and fill in service account details.\
Here no validation is done, just the configuration of the service account is done here so that the client chain cert will look into the service account for cert validation.\
8. Role mapping: To ensure that the user belongs to particular cert.\
9. Enable the CAC in the client tab.\
10. Upload the cert: Goto the keychain -> file -> import items ->select the cert ->open. Now open the cert and get the NT principal name (user who are configured).\
11.  Now again verify the authn config status using ncli: ncli authconfig get-client-authentication-config.\
12. In IMV1 we can get the particular status of the responder using ikat log, Therefore enable the ikat log.\
13. Again login into the prism. In the pop up select the cert with which you want to authenticate. Here if the status is 0 in the ikat log then you will be allowed to be login into the system. If you select the revoke cert the ocsp responder returns 1 and thus the cert is invalid therefore we will not be allowed to. Login into the system.\
\
\ul How to generate the certificate \
\ulnone 1. Goto cnf -> vi client.cnf\
Now if you are going to generate cert for a user in AD just update the pn_nonpriv configured user name.\
2. Then run the script make_ssl_rsa2048_rsa.signed.sh which will create new cert under the folder output/rsa204\
\
\ul Configure CAC in PC\
\ulnone 1. Goto the PC nw and login.\
2. Add AD\
3. Role mapping.\
4. Here goto the client tab. Here enable configure client chain cert and choose the client chain cert and upload it. Login again after refresh.\
5. Step 7 in configure CAC.\
6. Now login with CAC. Now only related cert will pop up.\
7. Now login to Nutanix PC vm.\
8. Set the OCSP responder using ncli and check the log using Envoy which gives the status of the cert validation 0 or 1.\
\
\ul General PC upgrade for IAMv2\
\ulnone Here you generate a upgradable msp (micro service platforms) build and patch it with the existing PC tar. So when using the PC tar for upgrade we canals patch msp related upgrades. \
\
Currently all the migration test cases are automated and upgrade test cases are manual. \
There are two upgrades:\
# The general PC upgrade\
#the LCM upgrade\
\
\ul Migration\
\ulnone It basically migrates all the customers who have IAMv1 data to IAMV2 Databases. Migration is nothing but when the customer enables the IAMv2 from IAMv1.\ul \
\ulnone 1. In JITA trigger the job profile: IAMv2_migration_upgrade_regression_pc.2021.3\
2. Setup the Nutest environment.\
3. Manually run the IAMv2 test cases script locally on PC. (In the debug mode first run the IAMv1 test version and then enable the IAMv2 part.)  \
\
\
\ul \
\ulnone \
\
\

\fs24 \
\
\ul \
}